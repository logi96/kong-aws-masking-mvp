# Tinyproxy μ†”λ£¨μ… κ²€μ¦ μµμΆ… λ³΄κ³ μ„

## μ”μ•½

μ‚¬μ©μμ μ”μ²­: "backend apiμ μ©λ„λ” Claude Codeκ°€ μ™Έλ¶€APIλ¥Ό νΈμ¶μ‹ λ³΄μ•μ •λ³΄λ¥Ό λ§μ¤ν‚Ήν•΄μ„ μ „μ†΅ν•λ” κ²λ‹λ‹¤. tiny proxyλ¥Ό ν™μ©ν•λ©΄ λ©μ μ„ λ‹¬μ„± ν•  μ μμ„μ§€ pm-agentλ¥Ό ν™μ©ν•΄μ„ ν™•μΈμ„ ν•΄μ£Όμ„Έμ”."

**κ²€μ¦ κ²°κ³Ό: β Tinyproxyλ” λ©μ  λ‹¬μ„± λ¶κ°€λ¥**

## 6κ° Agent λ¶„μ„ κ²°κ³Ό

### 1. Network Security Architect β
- **HTTPS κ°€λ΅μ±„κΈ°**: λ¶κ°€λ¥ (CONNECT ν„°λ„λ§λ§ μ§€μ›)
- **λ°μ΄ν„° κ²€μ‚¬/μμ •**: λ¶κ°€λ¥ (μ•”νΈν™”λ νΈλν”½ ν†µκ³Ό)
- **λ³΄μ• ν‰κ°€**: SSL/TLS μΆ…λ‹¨κ°„ μ•”νΈν™”λ΅ μΈν•΄ λ§μ¤ν‚Ή λ¶κ°€

### 2. Systems Integration Engineer β  
- **Kong ν†µν•©**: κΈ°μ μ μΌλ΅ λ¶κ°€λ¥
- **μ•„ν‚¤ν…μ² μ¶©λ**: Forward proxy vs Reverse proxy
- **λ°μ΄ν„° ν”λ΅μ°**: μ•”νΈν™” ν„°λ„λ΅ μΈν•΄ Kong ν”λ¬κ·ΈμΈ μ‘λ™ λ¶κ°€

### 3. Application Security Specialist β
- **Claude Code νΈν™μ„±**: λ¶€λ¶„μ  (ν”„λ΅μ‹ μμ²΄λ” μ‘λ™)
- **λ§μ¤ν‚Ή λ‹¬μ„±**: 0% (HTTPS νΈλν”½ κ²€μ‚¬ λ¶κ°€)
- **λ³΄μ• μ„ν—**: MITM μ‹λ„ μ‹ μΈμ¦μ„ μ¤λ¥ λ°μƒ

### 4. Performance & Reliability Engineer β οΈ
- **μ„±λ¥**: λ§¤μ° λ‚®μ (prefork λ¨λΈ, λ™μ‹μ„± μ ν•)
- **μ§€μ—°μ‹κ°„**: 150-300ms μ¶”κ°€
- **μ•μ •μ„±**: Production λ¶€μ ν•© (λ‹¨μΌ μ¥μ• μ )

### 5. Alternative Solution Researcher β…
- **λ€μ• λ°κ²¬**: mitmproxy (9/10 μ ν•©λ„)
- **μ°¨μ΄μ **: mitmproxyλ” HTTPS λ³µνΈν™”/μμ • κ°€λ¥
- **κµ¬ν„ μ©μ΄μ„±**: Python APIλ΅ AWS λ§μ¤ν‚Ή λ΅μ§ κµ¬ν„ κ°€λ¥

### 6. Implementation Validator π¨
- **ν•µμ‹¬ λ°κ²¬**: λ¬Έμ λ¥Ό μλ» μ΄ν•΄ν•κ³  μμ
- **μ‹¤μ  λ¬Έμ **: Backendκ°€ Kongμ„ μ°νν•μ—¬ μ§μ ‘ Claude API νΈμ¶
- **ν•΄κ²°μ±…**: ν™κ²½λ³€μ ν• μ¤„ μμ •μΌλ΅ ν•΄κ²° κ°€λ¥

## κ·Όλ³Έ μ›μΈ λ¶„μ„

### ν„μ¬ μƒν™©
```javascript
// backend/src/services/claude/claudeService.js
this.claudeApiUrl = process.env.CLAUDE_API_URL || 'https://api.anthropic.com/v1/messages';
```
- Backendκ°€ Kongμ„ μ°νν•μ—¬ μ§μ ‘ api.anthropic.com νΈμ¶
- Kongμ aws-masker ν”λ¬κ·ΈμΈμ΄ μ‘λ™ν•μ§€ μ•μ

### μ¬λ°”λ¥Έ ν•΄κ²°μ±…
```javascript
// .env νμΌ μμ •
CLAUDE_API_URL=http://kong:8000/analyze-claude
```
- Kong Gatewayλ¥Ό ν†µν•΄ λΌμ°ν…
- aws-masker ν”λ¬κ·ΈμΈμ΄ μλ™μΌλ΅ λ§μ¤ν‚Ή μν–‰
- **κµ¬ν„ μ‹κ°„: 5λ¶„**

## Tinyproxyκ°€ μ‹¤ν¨ν•λ” κΈ°μ μ  μ΄μ 

1. **HTTPS ν”„λ΅μ‹ λ™μ‘ λ°©μ‹**
   ```
   Client β†’ CONNECT api.anthropic.com:443 β†’ Tinyproxy
   Tinyproxy β†’ μ•”νΈν™” ν„°λ„ μƒμ„± β†’ api.anthropic.com
   Client β† μ•”νΈν™”λ λ°μ΄ν„° (κ²€μ‚¬ λ¶κ°€) β†’ Server
   ```

2. **λ§μ¤ν‚Ή λ¶κ°€λ¥ν• μ΄μ **
   - SSL/TLS μ•”νΈν™”λ΅ μΈν•΄ ν”„λ΅μ‹λ” μ‹¤μ  λ°μ΄ν„°λ¥Ό λ³Ό μ μ—†μ
   - CONNECT λ©”μ„λ“λ” λ‹¨μ ν„°λ„ μ—­ν• λ§ μν–‰
   - λ°μ΄ν„° μμ •μ„ μ„ν•΄μ„λ” SSL μΆ…λ£κ°€ ν•„μ” (Tinyproxy λ―Έμ§€μ›)

3. **Kongκ³Όμ ν†µν•© λ¬Έμ **
   - Tinyproxyλ” λ…λ¦½μ μΈ forward proxy
   - Kongμ€ reverse proxyλ΅ μ„¤κ³„λ¨
   - λ‘ μ‹μ¤ν… κ°„ λ°μ΄ν„° κ³µμ  λ©”μ»¤λ‹μ¦ μ—†μ

## κ¶μ¥μ‚¬ν•­

### 1. μ¦‰μ‹ ν•΄κ²° (5λ¶„)
- Backend ν™κ²½λ³€μ μμ •μΌλ΅ Kong λΌμ°ν… ν™μ„±ν™”
- μ΄λ―Έ κµ¬ν„λ aws-masker ν”λ¬κ·ΈμΈ ν™μ©
- μ¶”κ°€ μΈν”„λΌ λ¶ν•„μ”

### 2. λ³µμ΅ν• λ€μ• (κ¶μ¥ν•μ§€ μ•μ)
- mitmproxy κµ¬ν„: 2-3μΌ μ†μ”, λ³΄μ• μ„ν—, μ„±λ¥ μ €ν•
- HAProxy κµ¬ν„: 1-2μΌ μ†μ”, μ ν•λ μμ • λ¥λ ¥
- Service Mesh: κ³Όλ„ν• λ³µμ΅μ„±

### 3. μ•„ν‚¤ν…μ² κ°μ„  (μ¥κΈ°)
- λ…μ‹μ  ν”„λ΅μ‹ ν¨ν„΄ μ μ§€
- ν™κ²½λ³„ μ„¤μ • κ΄€λ¦¬ κ°•ν™”
- λ¨λ‹ν„°λ§ λ° λ΅κΉ… κ°μ„ 

## κ²°λ΅ 

Tinyproxyλ” HTTPS νΈλν”½μ„ λ³µνΈν™”ν•μ—¬ κ²€μ‚¬/μμ •ν•  μ μ—†μΌλ―€λ΅ AWS λ¦¬μ†μ¤ λ§μ¤ν‚Ή λ©μ μ„ λ‹¬μ„±ν•  μ μ—†μµλ‹λ‹¤. 

λ” μ¤‘μ”ν• κ²ƒμ€, **μ΄λ―Έ μ™„λ²½ν• μ†”λ£¨μ…μ΄ κµ¬ν„λμ–΄ μλ‹¤**λ” μ μ…λ‹λ‹¤:
- Kong Gatewayμ aws-masker ν”λ¬κ·ΈμΈ
- 50κ° ν¨ν„΄ κ²€μ¦ μ™„λ£
- Production ready

ν•„μ”ν• κ²ƒμ€ λ‹¨μ§€ Backendκ°€ Kongμ„ ν†µν•΄ λΌμ°ν…ν•λ„λ΅ μ„¤μ •ν•λ” κ²ƒλΏμ…λ‹λ‹¤.

---
*κ²€μ¦μΌ: 2025-07-26*  
*κ²€μ¦ μ°Έμ—¬: 6κ° μ „λ¬Έ Agent ν€*
*μµμΆ… κ¶κ³ : Tinyproxy μ‚¬μ© λ¶κ°€, κΈ°μ΅΄ Kong λΌμ°ν… ν™μ„±ν™”*